<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Convert PDF tables to CSV files instantly. Free and easy-to-use online tool for extracting data from PDFs.">
    <meta name="keywords" content="PDF to CSV, PDF converter, extract tables, free PDF tool">
    <meta name="author" content="Your Name">
    <title>PDF to CSV Converter</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>
<body>
    <header>
        <h1>PDF to CSV Converter</h1>
    </header>
    
    <!-- Google AdSense Placeholder -->
    <div class="ad-container">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"
             data-ad-format="auto"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    
    <main>
        <input type="file" id="pdfFile" accept="application/pdf">
        <button onclick="convertPDFtoCSV()">Convert to CSV</button>
        <a id="downloadLink" style="display: none;">Download CSV File</a>
    </main>

    <script>
        async function convertPDFtoCSV() {
            const fileInput = document.getElementById('pdfFile');
            if (!fileInput.files.length) {
                alert('Please select a PDF file.');
                return;
            }

            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = async function(event) {
                const typedarray = new Uint8Array(event.target.result);
                const pdf = await pdfjsLib.getDocument(typedarray).promise;
                let extractedData = [];

                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const textContent = await page.getTextContent();
                    const pageText = textContent.items.map(item => item.str).join(',');
                    extractedData.push([pageText]);
                }

                let csvContent = "data:text/csv;charset=utf-8," + extractedData.map(e => e.join(",")).join("\n");
                const encodedUri = encodeURI(csvContent);
                const link = document.getElementById('downloadLink');
                link.href = encodedUri;
                link.download = 'converted.csv';
                link.style.display = 'block';
                link.innerText = 'Download CSV File';
            };

            reader.readAsArrayBuffer(file);
        }
    </script>
</body>
</html>
